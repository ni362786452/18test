define("components/pop/base",["backbone","jqueryui"],function(e,t){return e.View.extend({className:"popover left",initialize:function(e){window.__components__pop&&window.__components__pop.hide&&window.__components__pop.hide(),window.__components__pop=this,this.callback=e.callback,this.target=e.target,this.trigger=e.trigger,e.notAutoHide||this.autoHide()},render:function(){return this.$el.html(this.template({})),this.onRender&&this.onRender(),this},autoHide:function(){var e=this;$(document).on("click",function(t){e.isShow()&&0===e.$el.has(t.target).length&&t.target!==e.trigger[0]&&e.hide()})},setCallback:function(e){this.callback=e},setTarget:function(e){this.target=e},setTrigger:function(e){this.trigger=e},isShow:function(){return"none"!==this.$el.css("display")},hide:function(){return this.$el.hide(),this.remove(),window.__components__pop=null,this.$el},show:function(){return this.$el.show(),this.$el},toggle:function(){return this.$el.toggle(),this.$e},positioning:function(){var e=this,t=e.options.className;e.$el.show(),-1!==t.indexOf("left")?e.$el.position({of:e.target,my:"right center",at:"left center",collision:"none"}):-1!==t.indexOf("bottom")?e.$el.position({of:e.target,my:"center top",at:"center bottom",collision:"none"}):-1!==t.indexOf("top")?e.$el.position({of:e.target,my:"center bottom",at:"center top",collision:"none"}):e.$el.position({of:e.target,my:"left center",at:"right center",collision:"none"}),e.el.className=e.options.className},reset:function(e){var t=e.callback,n=e.target,i=e.trigger;this.setCallback(t),this.setTarget(n),this.setTrigger(i),this.positioning(),this.show()},triggerCallback:function(){this.callback.call(this),this.hide()}})}),define("text!components/pop/templates/help_notes.html",[],function(){return'<div class="arrow"></div>\n<div class="popover-inner">\n    <div class="popover-content">\n        <%= content %>\n    </div>\n</div>\n'}),define("components/pop/help_notes",["backbone","components/pop/base","text!components/pop/templates/help_notes.html","core/utils","clipboard"],function(e,t,n,i,o){var r=window._;return t.extend({template:r.template(n),className:function(){return this.options.className},events:{"click .js-btn-cancel":"hide","click .js-btn-confirm":"triggerCallback","keydown .js-rename-placeholder":function(e){e.keyCode===i.keyCode.ENTER&&this.triggerCallback()}},initialize:function(e){t.prototype.initialize.call(this,e),o.config({moviePath:window._global.url.cdn_static.replace(/^https?:\/\//,"//")+"/vendor/plugin/ZeroClipboard.swf",trustedDomains:["*"],allowScriptAccess:"always"}),this.data=e.data},render:function(){var e=this,t="暂时没有注释内容。";this.target.parent(".js-help-notes").length&&(this.target=this.target.parent()),t=this.target.parent().find(".js-notes-cont").html(),this.$el.html(this.template({content:t}));var n=new o(this.$(".js-help-notes-btn-copy"));return n.on("load",function(t){t.on("complete",function(t,o){i.successNotify("复制成功"),e.hide(),n.off("load")})}),this},positioning:function(){var e=this,t=e.options.className;e.$el.show(),-1!==t.indexOf("custom-right")?e.$el.position({of:e.target,my:"right top",at:"right bottom",collision:"none"}):-1!==t.indexOf("left")?e.$el.position({of:e.target,my:"right center",at:"left center",collision:"none"}):-1!==t.indexOf("bottom")?e.$el.position({of:e.target,my:"center top",at:"center bottom",collision:"none"}):-1!==t.indexOf("top")?e.$el.position({of:e.target,my:"center bottom",at:"center top",collision:"none"}):e.$el.position({of:e.target,my:"left center",at:"right center",collision:"none"}),e.el.className=e.options.className},setData:function(e){this.data=e,this.render()},reset:function(e){var t=e.callback,n=e.target,i=e.trigger,o=e.data,r=e.className||"popover bottom";this.options.className=r,this.setCallback(t),this.setTarget(n),this.setTrigger(i),this.setData(o),this.positioning(),this.clearInput(),this.show()},triggerCallback:function(){this.callback(),this.hide()},clearInput:function(){this.$(".js-link-placeholder").val("")}})}),define("components/pop/atom/help_notes",["require","backbone","components/pop/help_notes"],function(e){"use strict";var t=(e("backbone"),e("components/pop/help_notes"));return{initialize:function(e){var n=e.target=$(e.target),i=e.className,o=(e.type,e.callback),r=e.trigger=$(e.trigger||n),s=(e.data,e.notAutoHide,e.content,e.appendTarget||"body"),a=new t({callback:o,target:n,className:i||"popover bottom",trigger:r});return a.render().$el.appendTo(s),a.positioning(),a}}}),define("components/help_notes/com",["require","jquery","components/pop/atom/help_notes"],function(e){"use strict";var t=e("jquery"),n=e("components/pop/atom/help_notes"),i=null,o=1,r=1,s="",a=2,c=".js-intro-popover .popover-inner",l=function(e){var o="js-intro-popover popover popover-help-notes "+s;2!==a&&(o="js-intro-popover popover popover-intro "+s),r=0,i&&clearTimeout(i),i=setTimeout(function(){t(".js-intro-popover").remove(),n.initialize({target:t(e.target),className:o})},200)},d=function(){i&&clearTimeout(i),i=setTimeout(function(){r&&o&&t(".js-intro-popover").hide()},200)};t("body").on("mouseover",".js-help-notes, .js-help-notes-btn-copy",function(e){var n=t(this);s=n.data("class")||"bottom",a=n.data("ui-version")||2,l(e)}).on("mouseout",".js-help-notes, #global-zeroclipboard-html-bridge",function(){r=1,d()}),t("body").on("mouseover",c,function(){o=0}).on("mouseout",c,function(){o=1,d()})}),define("models/login",["require","backbone"],function(e){"use strict";return e("backbone").Model.extend({defaults:{mobile:"",password:"",captcha:"",captcha_code:""},idAttribute:"mobile",validation:{mobile:[{required:!0,msg:"帐号没有填写"}],password:[{required:!0,msg:"密码没有填写"}],captcha_code:[{required:!0,msg:"验证码没有填写"}]}})}),define("text!templates/login.html",[],function(){return'<div class="container">\n    <div class="header">\n        <a href="<%- _global.url.youzan %>" class="js-route">\n            <div class="header-logo"></div>\n        </a>\n        <div class="header-title">登录</div>\n    </div>\n    <div class="main main-login clearfix">\n        <form class="form-horizontal form-left-side">\n            <fieldset>\n                <div class="control-group-container ">\n                    <div class="control-group ">\n                        <label class="control-label">手机号码</label>\n                        <div class="controls user-id">\n                        </div>\n                    </div>\n                    <div class="err-msg"></div>\n                </div>\n\n                <div class="control-group-container">\n                    <div class="control-group">\n                        <label class="control-label">登录密码</label>\n                        <div class="controls">\n                            <input tabindex="2" class="js-password-focus" type="password" placeholder="请输入密码" name="password" value="<%= password %>"/>\n                            <span class="icon-switch-password icon-password-hide js-switch-password-display hide"></span>\n                        </div>\n                    </div>\n                    <div class="err-msg"></div>\n                </div>\n\n                <div class="control-group-container">\n                    <div class="control-group">\n                        <label class="control-label">验证码</label>\n                        <div class="controls">\n                            <input tabindex="3" class="half-input" type="text" placeholder="请输入验证码" name="captcha_code" value="<%- captcha_code %>"/>\n                            <img class="captcha-img" src="<%- captcha %>" />\n                        </div>\n                    </div>\n                    <div class="err-msg"></div>\n                </div>\n\n                <div class="control-group extra-group">\n                    \x3c!--<div class="controls">--\x3e\n                        <label class="auto-login">\n                            <input type="checkbox" name="auto_login" tabindex="-1" checked>\n                            三天内自动登录\n                        </label>\n                        <a class="lost-pw" href="<%- _global.url.www %>/account/retrieve" target="_blank" class="new-window" tabindex="-1">忘记密码?</a>\n                    \x3c!--</div>--\x3e\n                </div>\n                <div class="control-group">\n                    \x3c!--<div class="controls">--\x3e\n                        <button tabindex="5" class="btn btn-block btn-large btn-primary login-btn" data-loading-text="正在登录...">登录</button>\n                    \x3c!--</div>--\x3e\n                </div>\n                <div class="control-group">\n                    <div class="controls">\n                        <a class="register-link" href="<%- _global.url.www %>/account?from=<%- _global.reg_from %>" target="_blank" class="js-route-transfer">免费注册，轻松开店</a>\n                    </div>\n                </div>\n            </fieldset>\n        </form>\n\n\n            <% if (window.cmsConfig && cmsConfig.pic_url) { %>\n            <% cmsConfig.custom_link = cmsConfig.custom_link || "javascript:void(0);" %>\n        <div class="side-wrap side-wrap-cms">\n            <div>\n                <a href="<%- cmsConfig.custom_link %>" target="_blank">\n                    <img src="<%- cmsConfig.pic_url %>" alt="推广位展示图片">\n                </a>\n            </div>\n        </div>\n            <% } else { %>\n                <% if (isRetail) { %>\n                    <div class="side-wrap">\n                        <div class="login-download-retail-icon"></div>\n                        <h4 class="side-desc">下载手机客户端</h4>\n                        <p class="side-info">随时随地管理你的店铺</p>\n                        <div class="btn-wrapper">\n                            <button class="btn btn-default btn-block"\n                                    data-ui-version="3"\n                                    data-class="page-popover-app-phone left">立即下载</button>\n\n                            <div class="ui-popover left-bottom retail-popover promotion-app-popover">\n                                <div class="ui-popover-inner clearfix">\n                                    <p class="page-popover-retail-desc">\n                                        微信扫码下载\n                                    </p>\n                                    <div class="clearfix">\n                                        <div class="popover__qrcode">\n                                            <img src="https://img.yzcdn.cn/retail/img/app/retail.png"\n                                            alt="" />\n                                            <p class="popover__qrcode--desc">手机版</p>\n                                        </div>\n                                        <div class="popover__qrcode">\n                                            <img src="https://img.yzcdn.cn/retail/img/app/retailhd.png"\n                                            alt="" />\n                                            <p class="popover__qrcode--desc">Pad版</p>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="arrow"></div>\n                            </div>\n                        </div>\n                    </div>\n                <% } else { %>\n                    <div class="side-wrap">\n                        <div class="login-download-wsc-icon"></div>\n                        <h4 class="side-desc">下载手机客户端</h4>\n                        <p class="side-info">随时随地管理你的店铺</p>\n                        <div class="btn-wrapper">\n                            <button class="btn btn-default btn-block"\n                                    data-ui-version="3"\n                                    data-class="page-popover-app-phone left">立即下载</button>\n\n                            <div class="ui-popover left-bottom promotion-app-popover">\n                                <div class="ui-popover-inner clearfix">\n                                    <div class="page-popover-desc">\n                                        <div>扫码下载</div>\n                                        <div>微商城手机客户端</div>\n                                    </div>\n                                    <div class="page-popover-qrcode">\n                                        <img src="<%- fullfillImage(\'public_files/2016/12/02/64f14f3b24ae96d6a8935ffc65054664.png\') %>" alt="">\n                                    </div>\n                                </div>\n                                <div class="arrow"></div>\n                            </div>\n                        </div>\n                    </div>\n                <% } %>\n            <% } %>\n\n\n\n\n\n\n            \x3c!--\n            <div class="login-download-wsc-btn page-popover-app-phone">\n                <button class="btn btn-default btn-block js-help-notes"\n                        data-ui-version="3"\n                        data-class="page-popover-app-phone left">立即下载</button>\n                <div class="js-notes-cont hide">\n                    <div class="page-popover-content clearfix">\n                        <div class="page-popover-desc">\n                            <div>扫码下载</div>\n                            <div>微商城手机客户端</div>\n                        </div>\n                        <div class="page-popover-qrcode">\n                            <img src="<%- fullfillImage(\'public_files/2016/12/02/64f14f3b24ae96d6a8935ffc65054664.png\') %>" alt="">\n                        </div>\n                    </div>\n                </div>\n            </div>\n            --\x3e\n        </div>\n    </div>\n\n    <div class="footer"><p class="copyright">&copy; <a href="<%- window._global.url.youzan %>">youzan.com</a></p></div>\n</div>\n'}),define("bower_components/aes/aes",["require","exports","module"],function(e,t,n){var i=i||function(e,t){var n={},i=n.lib={},o=function(){},r=i.Base={extend:function(e){o.prototype=this;var t=new o;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var o=0;o<e;o++)t[i+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(i+o)%4*8;else if(65535<n.length)for(o=0;o<e;o+=4)t[i+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;i<t;i+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),a=n.enc={},c=a.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new s.init(n,t/2)}},l=a.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new s.init(n,t)}},d=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},p=i.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,o=n.sigBytes,r=this.blockSize,a=o/(4*r),a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(t=a*r,o=e.min(4*t,o),t){for(var c=0;c<t;c+=r)this._doProcessBlock(i,c);c=i.splice(0,t),n.sigBytes-=o}return new s.init(c,o)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=p.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new u.HMAC.init(e,n).finalize(t)}}});var u=n.algo={};return n}(Math);!function(){var e=i,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp(),e=[];for(var o=0;o<n;o+=3)for(var r=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;4>s&&o+.75*s<n;s++)e.push(i.charAt(r>>>6*(3-s)&63));if(t=i.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,i=this._map,o=i.charAt(64);o&&-1!=(o=e.indexOf(o))&&(n=o);for(var o=[],r=0,s=0;s<n;s++)if(s%4){var a=i.indexOf(e.charAt(s-1))<<s%4*2,c=i.indexOf(e.charAt(s))>>>6-s%4*2;o[r>>>2]|=(a|c)<<24-r%4*8,r++}return t.create(o,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,i,o,r,s){return((e=e+(t&n|~t&i)+o+s)<<r|e>>>32-r)+t}function n(e,t,n,i,o,r,s){return((e=e+(t&i|n&~i)+o+s)<<r|e>>>32-r)+t}function o(e,t,n,i,o,r,s){return((e=e+(t^n^i)+o+s)<<r|e>>>32-r)+t}function r(e,t,n,i,o,r,s){return((e=e+(n^(t|~i))+o+s)<<r|e>>>32-r)+t}for(var s=i,a=s.lib,c=a.WordArray,l=a.Hasher,a=s.algo,d=[],p=0;64>p;p++)d[p]=4294967296*e.abs(e.sin(p+1))|0;a=a.MD5=l.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,i){for(var s=0;16>s;s++){var a=i+s,c=e[a];e[a]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var s=this._hash.words,a=e[i+0],c=e[i+1],l=e[i+2],p=e[i+3],u=e[i+4],h=e[i+5],f=e[i+6],g=e[i+7],v=e[i+8],m=e[i+9],w=e[i+10],b=e[i+11],y=e[i+12],_=e[i+13],x=e[i+14],k=e[i+15],C=s[0],j=s[1],E=s[2],S=s[3],C=t(C,j,E,S,a,7,d[0]),S=t(S,C,j,E,c,12,d[1]),E=t(E,S,C,j,l,17,d[2]),j=t(j,E,S,C,p,22,d[3]),C=t(C,j,E,S,u,7,d[4]),S=t(S,C,j,E,h,12,d[5]),E=t(E,S,C,j,f,17,d[6]),j=t(j,E,S,C,g,22,d[7]),C=t(C,j,E,S,v,7,d[8]),S=t(S,C,j,E,m,12,d[9]),E=t(E,S,C,j,w,17,d[10]),j=t(j,E,S,C,b,22,d[11]),C=t(C,j,E,S,y,7,d[12]),S=t(S,C,j,E,_,12,d[13]),E=t(E,S,C,j,x,17,d[14]),j=t(j,E,S,C,k,22,d[15]),C=n(C,j,E,S,c,5,d[16]),S=n(S,C,j,E,f,9,d[17]),E=n(E,S,C,j,b,14,d[18]),j=n(j,E,S,C,a,20,d[19]),C=n(C,j,E,S,h,5,d[20]),S=n(S,C,j,E,w,9,d[21]),E=n(E,S,C,j,k,14,d[22]),j=n(j,E,S,C,u,20,d[23]),C=n(C,j,E,S,m,5,d[24]),S=n(S,C,j,E,x,9,d[25]),E=n(E,S,C,j,p,14,d[26]),j=n(j,E,S,C,v,20,d[27]),C=n(C,j,E,S,_,5,d[28]),S=n(S,C,j,E,l,9,d[29]),E=n(E,S,C,j,g,14,d[30]),j=n(j,E,S,C,y,20,d[31]),C=o(C,j,E,S,h,4,d[32]),S=o(S,C,j,E,v,11,d[33]),E=o(E,S,C,j,b,16,d[34]),j=o(j,E,S,C,x,23,d[35]),C=o(C,j,E,S,c,4,d[36]),S=o(S,C,j,E,u,11,d[37]),E=o(E,S,C,j,g,16,d[38]),j=o(j,E,S,C,w,23,d[39]),C=o(C,j,E,S,_,4,d[40]),S=o(S,C,j,E,a,11,d[41]),E=o(E,S,C,j,p,16,d[42]),j=o(j,E,S,C,f,23,d[43]),C=o(C,j,E,S,m,4,d[44]),S=o(S,C,j,E,y,11,d[45]),E=o(E,S,C,j,k,16,d[46]),j=o(j,E,S,C,l,23,d[47]),C=r(C,j,E,S,a,6,d[48]),S=r(S,C,j,E,g,10,d[49]),E=r(E,S,C,j,x,15,d[50]),j=r(j,E,S,C,h,21,d[51]),C=r(C,j,E,S,y,6,d[52]),S=r(S,C,j,E,p,10,d[53]),E=r(E,S,C,j,w,15,d[54]),j=r(j,E,S,C,c,21,d[55]),C=r(C,j,E,S,v,6,d[56]),S=r(S,C,j,E,k,10,d[57]),E=r(E,S,C,j,f,15,d[58]),j=r(j,E,S,C,_,21,d[59]),C=r(C,j,E,S,u,6,d[60]),S=r(S,C,j,E,b,10,d[61]),E=r(E,S,C,j,l,15,d[62]),j=r(j,E,S,C,m,21,d[63]);s[0]=s[0]+C|0,s[1]=s[1]+j|0,s[2]=s[2]+E|0,s[3]=s[3]+S|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,o=8*t.sigBytes;n[o>>>5]|=128<<24-o%32;var r=e.floor(i/4294967296);for(n[15+(o+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(n.length+1),this._process(),t=this._hash,n=t.words,i=0;4>i;i++)o=n[i],n[i]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);return t},clone:function(){var e=l.clone.call(this);return e._hash=this._hash.clone(),e}}),s.MD5=l._createHelper(a),s.HmacMD5=l._createHmacHelper(a)}(Math),function(){var e=i,t=e.lib,n=t.Base,o=t.WordArray,t=e.algo,r=t.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=n.hasher.create(),r=o.create(),s=r.words,a=n.keySize,n=n.iterations;s.length<a;){c&&i.update(c);var c=i.update(e).finalize(t);i.reset();for(var l=1;l<n;l++)c=i.finalize(c),i.reset();r.concat(c)}return r.sigBytes=4*a,r}});e.EvpKDF=function(e,t,n){return r.create(n).compute(e,t)}}(),i.lib.Cipher||function(e){var t=i,n=t.lib,o=n.Base,r=n.WordArray,s=n.BufferedBlockAlgorithm,a=t.enc.Base64,c=t.algo.EvpKDF,l=n.Cipher=s.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,i){return("string"==typeof n?g:f).encrypt(e,t,n,i)},decrypt:function(t,n,i){return("string"==typeof n?g:f).decrypt(e,t,n,i)}}}});n.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=t.mode={},p=function(e,t,n){var i=this._iv;i?this._iv=void 0:i=this._prevBlock;for(var o=0;o<n;o++)e[t+o]^=i[o]},u=(n.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();u.Encryptor=u.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;p.call(this,e,t,i),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),u.Decryptor=u.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=e.slice(t,t+i);n.decryptBlock(e,t),p.call(this,e,t,i),this._prevBlock=o}}),d=d.CBC=u,u=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,n=n-e.sigBytes%n,i=n<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4)o.push(i);n=r.create(o,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},n.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:u}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=n.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),d=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?r.create([1398893684,1701076831]).concat(e).concat(t):t).toString(a)},parse:function(e){e=a.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var n=r.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:n})}},f=n.SerializableCipher=o.extend({cfg:o.extend({format:d}),encrypt:function(e,t,n,i){i=this.cfg.extend(i);var o=e.createEncryptor(n,i);return t=o.finalize(t),o=o.cfg,h.create({ciphertext:t,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(n,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,n,i){return i||(i=r.random(8)),e=c.create({keySize:t+n}).compute(e,i),n=r.create(e.words.slice(t),4*n),e.sigBytes=4*t,h.create({key:e,iv:n,salt:i})}},g=n.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:t}),encrypt:function(e,t,n,i){return i=this.cfg.extend(i),n=i.kdf.execute(n,e.keySize,e.ivSize),i.iv=n.iv,e=f.encrypt.call(this,e,t,n.key,i),e.mixIn(n),e},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),n=i.kdf.execute(n,e.keySize,e.ivSize,t.salt),i.iv=n.iv,f.decrypt.call(this,e,t,n.key,i)}})}(),function(){for(var e=i,t=e.lib.BlockCipher,n=e.algo,o=[],r=[],s=[],a=[],c=[],l=[],d=[],p=[],u=[],h=[],f=[],g=0;256>g;g++)f[g]=128>g?g<<1:g<<1^283;for(var v=0,m=0,g=0;256>g;g++){var w=m^m<<1^m<<2^m<<3^m<<4,w=w>>>8^255&w^99;o[v]=w,r[w]=v;var b=f[v],y=f[b],_=f[y],x=257*f[w]^16843008*w;s[v]=x<<24|x>>>8,a[v]=x<<16|x>>>16,c[v]=x<<8|x>>>24,l[v]=x,x=16843009*_^65537*y^257*b^16843008*v,d[w]=x<<24|x>>>8,p[w]=x<<16|x>>>16,u[w]=x<<8|x>>>24,h[w]=x,v?(v=b^f[f[f[_^b]]],m^=f[f[m]]):v=m=1}var k=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes/4,e=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],r=0;r<e;r++)if(r<n)i[r]=t[r];else{var s=i[r-1];r%n?6<n&&4==r%n&&(s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s]):(s=s<<8|s>>>24,s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s],s^=k[r/n|0]<<24),i[r]=i[r-n]^s}for(t=this._invKeySchedule=[],n=0;n<e;n++)r=e-n,s=n%4?i[r]:i[r-4],t[n]=4>n||4>=r?s:d[o[s>>>24]]^p[o[s>>>16&255]]^u[o[s>>>8&255]]^h[o[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,c,l,o)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,d,p,u,h,r),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,i,o,r,s,a){for(var c=this._nRounds,l=e[t]^n[0],d=e[t+1]^n[1],p=e[t+2]^n[2],u=e[t+3]^n[3],h=4,f=1;f<c;f++)var g=i[l>>>24]^o[d>>>16&255]^r[p>>>8&255]^s[255&u]^n[h++],v=i[d>>>24]^o[p>>>16&255]^r[u>>>8&255]^s[255&l]^n[h++],m=i[p>>>24]^o[u>>>16&255]^r[l>>>8&255]^s[255&d]^n[h++],u=i[u>>>24]^o[l>>>16&255]^r[d>>>8&255]^s[255&p]^n[h++],l=g,d=v,p=m;g=(a[l>>>24]<<24|a[d>>>16&255]<<16|a[p>>>8&255]<<8|a[255&u])^n[h++],v=(a[d>>>24]<<24|a[p>>>16&255]<<16|a[u>>>8&255]<<8|a[255&l])^n[h++],m=(a[p>>>24]<<24|a[u>>>16&255]<<16|a[l>>>8&255]<<8|a[255&d])^n[h++],u=(a[u>>>24]<<24|a[l>>>16&255]<<16|a[d>>>8&255]<<8|a[255&p])^n[h++],e[t]=g,e[t+1]=v,e[t+2]=m,e[t+3]=u},keySize:8});e.AES=t._createHelper(n)}(),i.pad.Iso10126={pad:function(e,t){var n=4*t,n=n-e.sigBytes%n;e.concat(i.lib.WordArray.random(n-1)).concat(i.lib.WordArray.create([n<<24],1))},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},n.exports=i}),define("bower_components/aes/main",["require","./aes"],function(e){var t=e("./aes"),n=t.enc.Utf8.parse("youzan.com.aesiv"),i=t.enc.Utf8.parse("youzan.com._key_");return{encrypt:function(e){return e=t.enc.Utf8.parse(e),t.AES.encrypt(e,i,{mode:t.mode.CBC,padding:t.pad.Iso10126,iv:n}).toString()}}}),define("components/widget/internationalPassport",["require","jquery"],function(e){var t=e("jquery");!function(e){if(e.support.cors||!e.ajaxTransport||!window.XDomainRequest)return e;var t=/^(https?:)?\/\//i,n=/^get|post$/i,i=new RegExp("^(//|"+location.protocol+")","i");e.ajaxTransport("* text html xml json",function(o,r,s){if(o.crossDomain&&o.async&&n.test(o.type)&&t.test(o.url)&&i.test(o.url)){var a=null;return{send:function(t,n){var i="",s=(r.dataType||"").toLowerCase();a=new XDomainRequest,/^\d+$/.test(r.timeout)&&(a.timeout=r.timeout),a.ontimeout=function(){n(500,"timeout")},a.onload=function(){var t="Content-Length: "+a.responseText.length+"\r\nContent-Type: "+a.contentType,i={code:200,message:"success"},o={text:a.responseText};try{if("html"===s||/text\/html/i.test(a.contentType))o.html=a.responseText;else if("json"===s||"text"!==s&&/\/json/i.test(a.contentType))try{o.json=e.parseJSON(a.responseText)}catch(e){i.code=500,i.message="parseerror"}else if("xml"===s||"text"!==s&&/\/xml/i.test(a.contentType)){var r=new ActiveXObject("Microsoft.XMLDOM");r.async=!1;try{r.loadXML(a.responseText)}catch(e){r=void 0}if(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)throw i.code=500,i.message="parseerror","Invalid XML: "+a.responseText;o.xml=r}}catch(e){throw e}finally{n(i.code,i.message,o,t)}},a.onprogress=function(){},a.onerror=function(){n(500,"error",{text:a.responseText})},r.data&&(i="string"===e.type(r.data)?r.data:e.param(r.data)),a.open(o.type,o.url),a.send(i)},abort:function(){a&&a.abort()}}}})}(t);var n=function(){this._stack={}};n.prototype={on:function(e,t){this._stack[e]||(this._stack[e]=[]),this._stack[e].push(t)},trigger:function(e,t){if(this._stack[e])for(var n=this._stack[e],i=0,o=n.length;i<o;i++)n[i].call(this,t)}};var i=new n;return i.init=function(e){var n;if(e.mode||(e={root:e}),this._config={mode:e.mode||"multi",placeholder:e.placeholder||"今后使用手机号登录",tabindex:e.tabindex},n=e.root)return n=t(n),n.html('<div class="css-country ui-widget-chosen ui-chosen">                <select class="hide" data-placeholder="" name="country_code">                <option value="+86" selected>中国 +86</option>            </select>            </div>            <input type="text" class="js-mobile css-mobile" name="mobile" '+(this._config.tabindex?'tabindex="'+this._config.tabindex+'" ':"")+'placeholder="'+this._config.placeholder+'" maxlength="11" autocomplete="off">'),this.rootElem=n,this.rootElem.addClass(this._config.mode),this.selectElem=this.rootElem.find(".ui-widget-chosen select").chosen({disable_search:!0}),this.inputElem=this.rootElem.find(".js-mobile"),this._initEvent(),this._loadConfig(),this},i._initEvent=function(){var e=this;this.selectElem.on("change",function(n,i){var o=i.selected;o&&(e.trigger("change",{countryCode:o}),t.trim(e.inputElem.val())&&e.inputElem.trigger("change"))}),this.inputElem.on("change",function(n){var i=t(n.target).val();i&&e.trigger("change",{mobile:i})}),this.selectElem.on("chosen:showing_dropdown",function(){t(".ui-chosen").addClass("chosen-dropdown-opened")}),this.selectElem.on("chosen:hiding_dropdown",function(){t(".ui-chosen").removeClass("chosen-dropdown-opened")})},i._loadConfig=function(){function e(e){n._config.default_country_code=e[0].code;for(var t="",i=0,o=e.length;i<o;i++)t+='<option value="'+e[i].code+'" '+(0==i?"selected":"")+">"+e[i].name+" "+e[i].code+"</option>";n.selectElem.html(t).trigger("chosen:updated"),n.trigger("change",{countryCode:n.selectElem.val()})}var n=this;t.ajax({url:_global.url.uic+"/sso/countryCode/query"}).then(function(t){t&&t.data&&e(t.data)})},i.toggleMode=function(e){var t=this._config.mode,n="multi"==t?"single":"multi",i=this;return e==t?e:(this.rootElem.removeClass(t).addClass(n).addClass("animating"),setTimeout(function(){i.rootElem.removeClass("animating")},300),this._config.mode=n,n)},i.validate=function(){var e,n=t.trim(this.inputElem.val());return e="single"==this._config.mode||"+86"==this.selectElem.val()?/^1\d{10}$/:/^(\d){5,11}$/,e.test(n)},i.val=function(){return"multi"==this._config.mode?{country_code:this.selectElem.val(),mobile:this.inputElem.val()}:{country_code:this._config.default_country_code,mobile:this.inputElem.val()}},i}),define("components/validation/validate",["backbone","backboneValidate"],function(e){_.extend(e.Validation.patterns,{mobile:/^1\d{10}$/,integer:/^[1-9]\d*$/,zipCode:/^\d{6}$/}),_.extend(e.Validation.messages,{mobile:"请输入正确的手机号码"}),_.extend(e.Validation.callbacks,{valid:function(e,t,n){
t.indexOf(".")>=0&&(t=t.split(".").join("_"));var i,o;return i=e.$("["+n+"="+t+"]"),0===i.length?(i=e.$("["+n+'^="'+t+'"]'),o=i.parents(".control-group").first()):o=i.parents(".control-group").first(),o.removeClass("error"),"tooltip"!==i.data("error-style")?"inline"===i.data("error-style")?o.find(".help-inline.error-message").remove():o.find(".help-block.error-message").remove():i.data("tooltip")?i.tooltip("hide"):void 0},invalid:function(e,t,n,i){t.indexOf(".")>=0&&(t=t.split(".").join("_"));var o,r,s,a;return o=e.$("["+i+"="+t+"]"),0===o.length?(o=e.$("["+i+'^="'+t+'"]'),r=o.parents(".control-group").first()):r=o.parents(".control-group").first(),r.addClass("error"),"tooltip"===o.data("error-style")?(s=o.data("tooltip-position")||"right",o.tooltip({placement:s,trigger:"manual",title:n}),o.tooltip("show")):"inline"===o.data("error-style")?(0===r.find(".help-inline").length&&r.find(".controls").append('<span class="help-inline error-message"></span>'),a=r.find(".help-inline"),a.html(n)):"block"===o.data("error-style")?(0===r.find(".help-block").length&&r.append('<p class="help-block error-message"></p>'),a=r.find(".help-block"),a.html(n)):(0===r.find(".help-block").length&&r.find(".controls").append('<p class="help-block error-message"></p>'),a=r.find(".help-block"),a.html(n))}})}),define("views/form_view",["require","underscore","backbone","core/utils","components/validation/validate"],function(e){"use strict";var t=e("underscore"),n=e("backbone"),i=e("core/utils"),o=i.getUrlParam("service"),r="retail"===o;return e("components/validation/validate"),n.View.extend({originalEvents:{"blur .js-input-number":"validNumber","blur input[type=text],input[type=number],input[type=password],textarea":"validateInput","focus input[type=text],input[type=number],input[type=password],textarea":"clearError"},additionalEvents:{},events:function(){return t.extend({},this.originalEvents,this.additionalEvents)},initialize:function(){n.Validation.bind(this),this._regions=[],this.init()},init:function(){},render:function(){this.closeChildren();var e=this.model.toJSON();return this.$el.html(this.template(t.extend({fullfillImage:i.fullfillImage,isRetail:r},e))),this.onRender&&this.onRender(),this.handleRegions(this.addRegions(e)),this.renderImage(e),this.trigger("after_render"),this.$el},addRegions:function(){},handleRegions:function(e){e&&this._regions&&(this._regions=this._regions.concat(e))},validNumber:function(e){var t,n=$(e.target),i=$.trim(n.val()),o=n.attr("max"),r=n.attr("min")||0,s=n.data("default");$.isNumeric(i)?(t=Math.floor(i),null!=o&&""!==o&&(t=Math.min(t,o)),null!=r&&""!==r&&(t=Math.max(t,r))):t=s,n.val(t)},loadData:function(){var e=this.model,n={},i=this;t.each(this.$("form").serializeArray(),function(e){var t=e.name,o=$.trim(e.value),r=i.$("[name="+t+"]").parents(".js-isolate");r.length>0&&$.contains(i.el,r[0])||(void 0!=n[t]?n[t]=[].concat(n[t]).concat(o):n[t]=o)}),this.loadAdditionData(n),e.set(n)},loadAdditionData:function(e){},validate:function(e){e&&e.preventDefault();var t=this.model;return this.loadData(),t.validate(),t.isValid()},renderImage:function(e){var t=this.$(".image-display"),n=t.siblings("input"),i=n.attr("name"),o=e[i];null!=o&&""!=o&&(n.val(o),t.css({"background-image":"url("+o+")"}))},validateInput:function(e){var t=$(e.target),n=t.attr("name"),i=$.trim(t.val()),o={},r=this.model;t.hasClass("js-no-valid")||(r.trigger("change:content",{name:n,value:i}),o[n]=i,r.validate(o))},setError:function(e,t){var n=$('[name="'+e+'"]'),i=n.next(".help-block.error-message");n.parents(".control-group").addClass("error"),i.length?i.html(t):n.parents(".controls").append('<p class="help-block error-message">'+t+"</p>")},clearError:function(e){var t=$(e.target).parents(".control-group");t.find(".help-block.error-message").remove(),t.removeClass("error")},closeChildren:function(){var e,i=this;this._regions&&(t.forEach(this._regions,function(e){e.closeChildren&&e.closeChildren(),e.remove&&e.remove()}),this._regions.length=0),t.chain(this).keys().each(function(t){(e=i[t])instanceof n.View&&(e.closeChildren&&e.closeChildren(),e.remove(),delete i[e])})}})}),define("views/login",["require","underscore","jquery","backbone","text!templates/login.html","core/utils","bower_components/aes/main","components/widget/internationalPassport","./form_view"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),i=e("backbone"),o=e("text!templates/login.html"),r=e("core/utils"),s=e("bower_components/aes/main"),a=e("components/widget/internationalPassport"),c=e("./form_view");return c.extend({template:t.template(o),additionalEvents:{"click .captcha-img":"reloadCaptcha","click .login-btn":"login","click .js-route":"route","click .js-route-transfer":"routeTransfer","input .js-password-focus":"togglePasswordDisplaySwitcher","focus .js-password-focus":"togglePasswordDisplaySwitcher","blur .js-password-focus":"togglePasswordDisplaySwitcher","click .js-switch-password-display":"switchPasswordDisplay"},onRender:function(){var e=(a.init({root:this.$el.find(".user-id"),mode:"multi",placeholder:"注册时填写的手机号",tabindex:"1"}),this);i.Validation.bind(this,{valid:function(e,t){},invalid:function(t,n,i,o){e.setError(n,i)}}),setTimeout(function(){n(".js-mobile").focus()},100)},switchPasswordDisplay:function(e){var t=n(e.target),i=t.parents(".control-group-container").find("input");return t.hasClass("icon-password-show")?(i.attr("type","password"),t.removeClass("icon-password-show")):(i.attr("type","text"),t.addClass("icon-password-show")),!1},togglePasswordDisplaySwitcher:function(e){var t=n(e.target);if(t.hasClass("js-password-focus")){n(e.target).val().length||t.is(":focus")?n(".icon-switch-password").removeClass("hide"):n(".icon-switch-password").addClass("hide")}},clearError:function(e){var t=n(e.target).parents(".control-group-container");t.addClass("active"),t.removeClass("valid-failed"),t.find(".err-msg").html("")},validateInput:function(e){n(e.target).parents(".control-group-container").removeClass("active"),c.prototype.validateInput.call(this,e)},setError:function(e,t){var i=n('[name="'+e+'"]'),o=i.parents(".control-group-container");o.addClass("valid-failed"),o.find(".err-msg").html(t)},reloadCaptcha:function(e){var t=n(e.target);this.captchaSrc||(this.captchaSrc=t.attr("src")),t.attr("src",this.captchaSrc+"?t="+new Date)},route:function(){if(r.isFenxiao())return location.href=window._global.url.fenxiao,!1},routeTransfer:function(e){r.isFenxiao()&&(e.target.search=location.search)},encryptPassword:function(e){return e.password=s.encrypt(e.password),e},sendSentryLogin:function(e,t){var n=t.code,i=t.msg,o=(window._global||{}).module||"login sso",r="Login type error: "+n+" is not valid, and msg is: "+i+", module is: "+o;"object"==typeof Raven&&Raven.captureMessage&&Raven.captureMessage(r,{level:"warning",extra:{resp:t,ajaxData:e},tags:{Type:"LoginError"}})},login:function(e){e.preventDefault();var t,i=n(e.target),o=this;if(this.validate()){t=this.model.toJSON();var s=a.val();t.country_code=s.country_code,t=this.encryptPassword(t),i.button("loading"),delete t.captcha,t.service=r.getParameterByName("service");var c=new n.Deferred,l=new n.Deferred;r.ajax({url:"//uic.youzan.com/sso/index/login.json"+window.location.search,type:"POST",data:t,dataType:"json",xhrFields:{withCredentials:!0}}).done(function(e){o.onLogin&&o.onLogin(),c.resolve(e.redirect)}).fail(function(e,r){o.sendSentryLogin(t,r),135000001==r.code?(o.setError("captcha_code",e),n(".captcha-img").click()):10100==r.code?(o.setError("mobile",e),o.setError("password",e),n(".captcha-img").click()):(135200025==r.code?e=e+'，<a target="_black" href="'+window._global.url.www+'/account/retrieve">请点击设置登录密码</a>':135000042==r.code&&(e='帐户因尝试登录次数过多被锁定，<a target="_black" href="'+window._global.url.www+'/account/retrieve">请点击解锁</a>'),o.setError("mobile",e),n(".captcha-img").click()),n(".captcha-img").click(),i.button("reset")}),setTimeout(function(){l.reject()},2e3),n.when(c.promise(),l.promise()).then(function(e){window.location=e}).fail(function(){c.promise().then(function(e){window.location=e})})}}})}),define("text!templates/im_login.html",[],function(){return'<div class="login-wrap-im">\n    <div class="header">\n        <a href="<%= _global.url.youzan %>" class="js-route">\n            <div class="header-logo"></div>\n        </a>\n    </div>\n    <div class="main main-login clearfix">\n        <form class="form">\n            <fieldset>\n                <input style="display:none" type="text" name="fakeusernameremembered"/>\n                <input style="display:none" type="password" name="fakepasswordremembered"/>\n                <div class="control-group">\n                    <div class="controls">\n                        <input tabindex="1" type="text" name="account" value="<%= account %>" placeholder="电话号码" />\n                    </div>\n                </div>\n                <div class="control-group">\n                    <div class="controls">\n                        <input tabindex="2" type="password" name="password" value="<%= password %>" placeholder="密码" />\n                    </div>\n                </div>\n                <div class="control-group">\n                    <div class="controls">\n                        <input tabindex="3" class="half-input" type="text" name="captcha_code" value="<%= captcha_code %>" placeholder="验证码" />\n                        <img class="captcha-img" src="<%= captcha %>" />\n                    </div>\n                </div>\n                <div class="control-group control-group-action clearfix">\n                    <div class="controls">\n                        <div class="online-status-wrap js-online-status-wrap">\n                            <span class="online-status-text">在线</span>\n                            <span class="online-status js-online-status"></span>\n                            <ul class="online-status-menu js-online-status-switch">\n                                <li>在线</li>\n                                <li>忙碌</li>\n                            </ul>\n                            <i class="caret"></i>\n                        </div>\n                        <label class="auto-login">\n                            <input type="checkbox" name="auto_login" tabindex="-1" checked>\n                            三天内自动登录\n                        </label>\n                    </div>\n                </div>\n                <div class="control-group control-group-action">\n                    <div class="controls">\n                        <button tabindex="5" class="btn btn-large btn-primary login-btn" data-loading-text="正在登录...">登录</button>\n                    </div>\n                </div>\n                <div class="control-group">\n                    <div class="controls">\n                        <a class="lost-pw" href="/v2/account/retrieve" target="_blank" class="new-window" tabindex="-1">忘记密码?</a>\n                    </div>\n                </div>\n            </fieldset>\n        </form>\n    </div>\n</div>\n\n\n<div class="footer">\n    <a href="<%= _global.url.www %>/account" target="_blank" class="js-route-transfer">立即注册</a>\n    <p class="copyright">&copy; <a href="<%= window._global.url.youzan %>">youzan.com</a></p>\n</div>\n\n'}),define("views/im_login",["require","cookie","underscore","text!templates/im_login.html","views/login"],function(e){"use strict";e("cookie");var t=e("underscore"),n=e("text!templates/im_login.html"),i=e("views/login");return i.extend({template:t.template(n),events:t.extend(i.prototype.additionalEvents,{"mouseover .js-online-status-wrap":"overOnlineStatus","mouseleave .js-online-status-wrap":"outOnlineStatus","click .js-online-status-switch":"switchOnlineStatus"}),switchOnlineStatus:function(e){this.$(".js-online-status-wrap").trigger("mouseleave"),this.$(".js-online-status").toggleClass("online-status-busy",1==$(e.target).index()),this.$(".online-status-text").text(1==$(e.target).index()?"忙碌":"在线")},overOnlineStatus:function(e){this.$(".online-status-wrap").addClass("online-status-menu-hover")},outOnlineStatus:function(e){this.$(".online-status-wrap").removeClass("online-status-menu-hover")},onLogin:function(){this.$(".js-online-status").hasClass("online-status-busy")?$.cookie("im_status",2,{expires:3,path:"/",domain:"koudaitong.com"}):$.cookie("im_status",1,{expires:3,path:"/",domain:"koudaitong.com"})}})}),define("app",["require","backbone","jquery","models/login","views/login","views/im_login","components/validation/validate"],function(e){"use strict";var t=e("backbone"),n=e("jquery"),i=e("models/login"),o=e("views/login"),r=e("views/im_login");e("components/validation/validate");var s=t.View.extend({className:"account-login",index:function(){var e=new i({captcha:window._global.url.login+"/sso/index/captcha"}),t={model:e},r=new o(t);n(".app-init-container").html(r.render())},im:function(){var e=new i({captcha:window._global.url.base+"/captcha"}),t={model:e},o=new r(t);n(".app-init-container").html(o.render()).addClass("app-container-im"),n("body").addClass("theme-grey")}});return{initialize:function(e){return new s(e)}}}),define("routers/router",["require","backbone","core/utils","app"],function(e){"use strict";var t=e("backbone"),n=e("core/utils"),i=e("app");return t.Router.extend({routes:{"":"index","*frag":"index"},index:function(){if(window.App||(window.App=i.initialize()),/im\.koudaitong/.test(n.getUrlParam("redirect")))return void window.App.im();window.App.index()}})}),define("../helper",["require"],function(e){"use strict";return{log:function(e){var t=new Image,n="log_"+Math.floor(2147483648*Math.random()).toString(36);window[n]=t,t.onload=t.onerror=t.onabort=function(){t.onload=t.onerror=t.onabort=null,window[n]=null,delete window[n],t=null},t.src="https://tj.youzan.com/1.gif?"+this.serialize(e)},logV3:function(e){window.Logger&&window.Logger.log(e)},serialize:function(e){var t=[];for(var n in e)t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")},getUAInfo:function(){var e=navigator.userAgent.toLowerCase(),t={ua:e,os:"",browser:"",browserVer:""},n=/windows|mac|unix|ubuntu|iphone|ipad|android|linux/gi,i=/msie ([\d.]+)/gi,o=/firefox\/([\d.]+)/gi,r=/chrome\/([\d.]+)/gi,s=/opera.([\d.]+)/gi,a=/version\/([\d.]+).*safari/gi,c=e.match(n);return c.length&&(t.os=c[c.length-1]),s.test(e)?(t.browser="opera",t.browserVer=RegExp.$1):r.test(e)?(t.browser="chrome",t.browserVer=RegExp.$1):a.test(e)?(t.browser="safari",t.browserVer=RegExp.$1):o.test(e)?(t.browser="firefox",t.browserVer=RegExp.$1):i.test(e)&&(t.browser="ie",t.browserVer=RegExp.$1),t},getRandomString:function(e){return Math.random().toString(36).substr(2,e)}}}),define("main",["require","common","components/help_notes/com","backbone","routers/router","jquery","../helper"],function(e){"use strict";e("common"),e("components/help_notes/com");var t=e("backbone"),n=e("routers/router"),i=e("jquery"),o=e("../helper");return{initialize:function(){window.router=new n({}),t.history.start();try{o.log(i.extend({fm:"stBrowser",source:"login",t:(new Date).getTime()},o.getUAInfo()))}catch(e){}}}});